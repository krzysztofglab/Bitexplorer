export class Animation {
  openMenu() {
    document.querySelector('.game').classList.add('animOpenMenu');
    document.querySelector('.menu_header').classList.add('animOpenMenu-Header');
    document.querySelector('.content').classList.add('animOpenMenu-Content');
    document.querySelector('.btn_play').classList.add('animOpenMenu-Button');
    setTimeout(this.generateText.bind(this), 1750);
  }

  openBoard() {
    document.querySelector('.game').classList.remove('animOpenMenu');
    document.querySelector('.menu').classList.add('animExitMenu');
    document.querySelector('.game').classList.add('animOpenBoard');
    document.querySelector('.board').classList.add('animDisplayBoard');
  }

  generateText() {
    const notification = [];
    notification[0] = "// ENG1N3 ST4RT1NG ... [ DON3 ]";
    notification[1] = "// COLL3CT1NG D4TA ... [ DON3 ]";
    notification[2] = "// PROC3SS1NG D4TA ... [ DON3 ]";
    notification[3] = "// G3N3R4T1NG UN1QU3 TOK3N ... [ DON3 ]";
    notification[4] = "T C 1 2 - 8 D E F - H 3 J Z - C E N 4 - 4 G B J";
    notification[5] = "// TOK3N SUCCESSFULLY GENERATED !";
    notification[6] = "// SYST3M D14GNOST1CS STATUS";
    notification[7] = "*** KERNEL STATUS ... [ RUNNING ( 0x333012455 ) ]";
    notification[8] = "*** CRITICAL EXCEPTION SECURITY... [ READY ]";
    notification[9] = "// INITIATION SUCCESSFULLY !";

    notification.forEach((item, i) => {
      const p = document.createElement('p');
      if(i == 4){
        p.style.padding = "15px 0 15px 20px";
      } else if(i == 7 || i ==8) {
        p.style.paddingLeft = "20px";
      }
      document.querySelector('.autogenerated_text').appendChild(p);
    })

    this.typeEffect(notification, 0, 0)
  }

  typeEffect(data, index, letterPos) {
    if(index < data.length){
      if(letterPos <= data[index].length){
        document.querySelector('.autogenerated_text').querySelectorAll('p')[index].innerHTML = data[index].slice(0, letterPos);
        letterPos++;

        if(index == 4) {
          setTimeout(() => {
            this.typeEffect(data, index, letterPos);
          }, 20);
        } else {
          setTimeout(() => {
            this.typeEffect(data, index, letterPos);
          }, 10);
        }

      } else {
        index++;
        letterPos = 0;
        setTimeout(() => {
          this.typeEffect(data, index, letterPos);
        }, 10);
      }
    }
  }
}